Testing guidance:
- Prefer unit tests
- Mock external dependencies
- Test failure and edge cases
- Keep tests deterministic

If tests are slow or flaky, explain why.
